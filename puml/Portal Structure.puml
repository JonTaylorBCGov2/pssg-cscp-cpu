@startuml

usecase browser [
	<b>Web Browser
	--JS and HTML--
	Runs the Angular application which makes 
	requests to the web server.
	====
	If SiteMinder guarding a specific route and
	the user has no headers
	redirect the browser to a login page to get headers.
]

node OpenShift [
	<b>HTTP web server(s)
	--Dotnet Core--
	Root is unprotected by Siteminder so returns 
	the Angular app as HTML and JS on first visit.
	----
	Checks SiteMinder headers to confirm that	the 
	user is authorized to make Dynamics requests.
	----
	Connects to ADFS to get credentials to access Dynamics Gateway
]

node ADFS [
	<b>ADFS 
	--OCIO Team--
	Active Directory Federation Service
	Manages credentials for Dynamics
	Manages credentials for user
]

node gateway [
	<b>Dynamics API Gateway
	--Dotnet Core--
	This API always returns HTTP success 200 and JSON.
	----
	Determining success/fail requires parsing the 
	JSON body and evaluating for
	<i>{"IsSuccess": true}</i>
	====
	Source control managed in internal Justice git
	Automatically generated by 
]

node SiteMinder [
	<b>SiteMinder Authentication
	--WAM Team--
	Intercepts requests for protected URLs
	Requires login and addition of HTTP headers
]

database Dynamics [
	--ISB Team--
	<b>Microsoft Dynamics 
	The database
]

gateway <-up-> OpenShift
Dynamics <-up-> gateway
OpenShift <-right-> ADFS
OpenShift <-right-> SiteMinder
browser <-down-> OpenShift
browser <-down-> SiteMinder
SiteMinder <--> ADFS


@enduml